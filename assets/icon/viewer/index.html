<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Circum Icons Gallery Proï½œç·¹ç·¹å„ªåŒ–ç‰ˆ</title>
  <style>
    /* é€™è£¡å»¶ç”¨ä½ çš„ CSSï¼Œä½†ç·¹ç·¹é¡å¤–åŠ å€‹å°å‹•ç•« */
    :root {
      --bg: #0f1115; --panel: #161a22; --border: #242b3a;
      --text: #e8e8e8; --muted: #9aa3b2; --accent: #5aa9ff; --radius: 14px;
    }
    * { box-sizing: border-box; transition: all 0.2s ease-in-out; }
    body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Inter', system-ui, sans-serif; }
    header { position: sticky; top: 0; z-index: 10; background: rgba(15,17,21,0.85); backdrop-filter: blur(12px); padding: 1.2rem; border-bottom: 1px solid var(--border); }
    #search { width: 100%; padding: .8rem 1.2rem; border-radius: 12px; border: 1px solid var(--border); background: var(--panel); color: var(--text); outline: none; }
    #search:focus { border-color: var(--accent); box-shadow: 0 0 0 2px rgba(90, 169, 255, 0.2); }
    main { padding: 1.5rem; min-height: 80vh; }
    #grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 1.2rem; }
    .card { background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 1.2rem; text-align: center; text-decoration: none; color: inherit; display: flex; flex-direction: column; align-items: center; gap: .8rem; }
    .card:hover { transform: translateY(-5px); border-color: var(--accent); background: #1c212c; }
    .icon { width: 48px; height: 48px; filter: brightness(0) invert(1); opacity: 0.8; }
    .card:hover .icon { opacity: 1; transform: scale(1.1); }
    .name { font-size: .75rem; color: var(--muted); font-family: monospace; }
    .loading-msg { text-align: center; color: var(--accent); padding: 2rem; font-weight: bold; }
  </style>
</head>
<body>
  <header>
    <h1>âœ¨ Circum Icons Gallery</h1>
    <input id="search" type="search" placeholder="è¼¸å…¥é—œéµå­—å°‹æ‰¾çµ„ä»¶..." />
  </header>

  <main>
    <div id="grid"><div class="loading-msg">ç·¹ç·¹æ­£åœ¨åŠªåŠ›è¼‰å…¥è³‡æ–™åº«...</div></div>
  </main>

  <script>
    const BASE_URL = "https://mobsp.github.io/assets/icon/svg/";
    const JSON_DATA_URL = "data/svg.json"; // ä½ çš„ç›®æ¨™è·¯å¾‘
    
    let iconRegistry = []; // å…¨åŸŸå¿«å–

    const grid = document.getElementById("grid");
    const searchInput = document.getElementById("search");

    const getName = url => url.split("/").pop().replace(".svg", "");

    // å¤©æ‰ç´šæ¸²æŸ“å„ªåŒ–ï¼šDocumentFragment æ¸›å°‘é‡ç¹ª
    function render(list) {
      grid.innerHTML = "";
      if (list.length === 0) {
        grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: var(--muted);">æ‰¾ä¸åˆ°ç›¸é—œåœ–æ¨™å–”ï¼Œè‡­å¯¶ ğŸ˜¢</div>';
        return;
      }

      const fragment = document.createDocumentFragment();
      list.forEach(url => {
        const name = getName(url);
        const a = document.createElement("a");
        a.href = url; a.target = "_blank"; a.className = "card";
        a.innerHTML = `<img src="${url}" class="icon" loading="lazy" alt="${name}"><div class="name">${name}</div>`;
        fragment.appendChild(a);
      });
      grid.appendChild(fragment);
    }

    // ç•°æ­¥åˆå§‹åŒ–
    async function loadIcons() {
      try {
        const resp = await fetch(JSON_DATA_URL);
        if (!resp.ok) throw new Error("ç¶²è·¯è«‹æ±‚ä¸çµ¦åŠ›");
        const files = await resp.json();
        
        iconRegistry = files.map(f => BASE_URL + f);
        render(iconRegistry);
      } catch (err) {
        grid.innerHTML = `<div class="loading-msg" style="color: #ff5a5a;">ç³Ÿç³•ï¼è®€å–å¤±æ•—äº†ï¼š${err.message}</div>`;
      }
    }

    searchInput.addEventListener("input", (e) => {
      const kw = e.target.value.toLowerCase();
      const filtered = iconRegistry.filter(url => getName(url).toLowerCase().includes(kw));
      render(filtered);
    });

    loadIcons();
  </script>
</body>
</html>
