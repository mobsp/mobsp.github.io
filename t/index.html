<script>
    const SUPABASE_URL = 'https://svwrvxomytbfaqpfnifg.supabase.co';
    const SUPABASE_KEY = 'EyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2d3J2eG9teXRiZmFxcGZuaWZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEyNTc3NjEsImV4cCI6MjA4NjgzMzc2MX0.qq5kIBhi5kCIwprwNcraYvgYilxxwJanrKfnXdlRBuA';

    const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function startMarquee() {
        const marqueeEl = document.getElementById('marquee');
        
        // æ³¨æ„é€™è£¡ï¼šæˆ‘æŠŠæ¬„ä½æ”¹æˆäº†ä½ çš„ä¸­æ–‡æ¨™é¡Œ
        const { data, error } = await _supabase
            .from('notices')
            .select('é¡åˆ¥, å…§å®¹'); // å¦‚æœä½ çš„æ¨™é¡Œæ˜¯ã€Œé¡åˆ¥ã€èˆ‡ã€Œå…§å®¹ã€

        if (error) {
            marqueeEl.innerHTML = "âŒ è®€å–å¤±æ•—ï¼š" + error.message;
            console.error(error);
            return;
        }

        if (data && data.length > 0) {
            // é€™è£¡ä¹Ÿè¦å°æ‡‰ä¸­æ–‡æ¨™é¡Œä¾†æŠ“è³‡æ–™
            marqueeEl.innerHTML = data.map(item => `
                <span class="notice-item">
                    <span class="notice-type">${item.é¡åˆ¥}</span>${item.å…§å®¹}
                </span>
            `).join('');
        } else {
            marqueeEl.innerHTML = "ğŸ“­ ç›®å‰é›²ç«¯æ²’æœ‰å…¬å‘Šå…§å®¹ã€‚";
        }
    }
    startMarquee();
</script>
